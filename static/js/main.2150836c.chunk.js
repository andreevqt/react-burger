(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{123:function(e,t,n){e.exports={loader:"page-loader_loader__2S8k8"}},126:function(e,t,n){e.exports={scroll:"custom-scroll_scroll__3Qul1"}},129:function(e,t,n){e.exports={btn:"modal-close-btn_btn__3xgzI"}},130:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__KbArF"}},131:function(e,t,n){e.exports={buttons:"buttons_buttons__1j7mm",price:"buttons_price__3cnsw"}},132:function(e,t,n){e.exports={price:"total-price_price__3wBMS"}},133:function(e,t,n){e.exports={row:"row_row__1UQEh"}},134:function(e,t,n){e.exports={container:"container_container__3mAv_"}},136:function(e,t,n){e.exports={buttons:"profile_buttons__1lPOe"}},137:function(e,t,n){e.exports={description:"profile_description__1YPX4"}},138:function(e,t,n){e.exports={row:"no-match_row__B7t35"}},139:function(e,t,n){e.exports={row:"ingredient-row_row__13ZWE"}},19:function(e,t,n){e.exports={title:"ingredient-details_title__dbD5e",properties:"ingredient-details_properties__3O7ci",property:"ingredient-details_property__1_SC6","property-label":"ingredient-details_property-label__6ATed","property-value":"ingredient-details_property-value__2FrGN"}},225:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var r,c=n(1),a=n.n(c),i=n(36),s=n.n(i),o=n(5),l=(n(225),n(9)),u=n(120),d=n(22),j=n(29),b="SET_LAST_ERROR",m=function(e){return{type:b,payload:e}},p=function(e){var t=e.dispatch,n=e.getState;return function(e){return function(r){if(r.type===b||r.type.endsWith("ERROR"))return e(r);n().common.lastErr&&t(m(void 0)),e(r)}}},O=n(2),x=n(28),h=["success"],f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r){var c=r.getState,a=r.dispatch,i=void 0;return function(r){return function(s){var o=s.type,l=s.payload,u=c().auth.accessToken;u&&(u=u.replace("Bearer ",""));var d=e;n&&u&&(d+="?token=".concat(u)),o==="".concat(t,"_WS_INIT")&&(i=new WebSocket(d)),i&&(i.onopen=function(){a({type:"".concat(t,"_WS_SUCCESS")})},i.onerror=function(){a({type:"".concat(t,"_WS_ERROR")})},i.onmessage=function(e){var n=e.data,r=JSON.parse(n),c=(r.success,Object(x.a)(r,h));a({type:"".concat(t,"_WS_MESSAGE"),payload:c})},i.onclose=function(){a({type:"".concat(t,"_WS_CLOSED")})},o==="".concat(t,"_WS_SEND")&&i.send(JSON.stringify(Object(O.a)(Object(O.a)({},l),{},{token:u}))),o==="".concat(t,"_WS_CLOSE")&&i.close()),r(s)}}}},_="GET_ITEMS_PENDING",v="GET_ITEMS_FULFILLED",g="GET_ITEMS_ERROR",y="INCREMENT_ITEM",N="DECREMENT_ITEM",w="CLEAR_COUNT",E={isLoading:!1,items:[]},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!0});case v:return Object(O.a)(Object(O.a)({},e),{},{items:t.payload,isLoading:!1});case g:return E;case y:var n=t.payload;return Object(O.a)(Object(O.a)({},e),{},{items:e.items.map((function(e){return e._id===n?Object(O.a)(Object(O.a)({},e),{},{count:e.count?e.count+1:1}):e}))});case N:var r=t.payload;return Object(O.a)(Object(O.a)({},e),{},{items:e.items.map((function(e){return e._id===r?Object(O.a)(Object(O.a)({},e),{},{count:e.count&&e.count>1?e.count-1:void 0}):e}))});case w:return Object(O.a)(Object(O.a)({},e),{},{items:e.items.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{count:void 0})}))});default:return e}},S=n(27),T="CONSTRUCTOR_ADD_ITEM",C="CONSTRUCTOR_DELETE_ITEM",R="CONSTRUCTOR_SWAP_ITEMS",I="CONSTRUCTOR_RESET",L={bun:void 0,items:[]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:var n=t.payload;return"bun"===n.type?Object(O.a)(Object(O.a)({},e),{},{bun:n}):Object(O.a)(Object(O.a)({},e),{},{items:[].concat(Object(S.a)(e.items),[n])});case C:var r=t.payload;return Object(O.a)(Object(O.a)({},e),{},{items:e.items.filter((function(e,t){return t!==r}))});case R:var c=t.payload,a=c.dragIndex,i=c.hoverIndex,s=Object(S.a)(e.items),o=s[a];return s.splice(a,1),s.splice(i,0,o),Object(O.a)(Object(O.a)({},e),{},{items:s});case I:return L;default:return e}},M="SUBMIT_ORDER_PENDING",F="SUBMIT_ORDER_FULFILLED",A="SUBMIT_ORDER_ERROR",z="CLEAR_ORDER",P={order:void 0,isLoading:!1},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!0});case F:var n=t.payload;return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,order:n});case A:case z:return P;default:return e}},U="AUTH_PENDING",W="AUTH_ERROR",B="AUTH_FULFILLED",q={isLoading:!1,accessToken:void 0,user:void 0},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return q;case U:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!0});case B:if(!t.payload)return q;var n=t.payload,r=n.user,c=n.accessToken;return Object(O.a)(Object(O.a)({},e),{},{user:r,isLoading:!1},c&&{accessToken:c});default:return e}},V="FORGOT_PASSWORD_FULFILLED",Y="FORGOT_PASSWORD_PENDING",X="FORGOT_PASSWORD_ERROR";!function(e){e[e.CODE=0]="CODE",e[e.RESET=1]="RESET"}(r||(r={}));var J={isLoading:!1,step:r.CODE},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!0});case X:return J;case V:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,step:e.step===r.CODE?r.RESET:r.CODE});default:return e}},Z="FEED_WS_SUCCESS",K="FEED_WS_CLOSED",$="FEED_WS_ERROR",ee="FEED_WS_MESSAGE",te={connected:!1,orders:[],total:0,totalToday:0},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return Object(O.a)(Object(O.a)({},e),{},{connected:!0});case ee:var n=t.payload;return Object(O.a)(Object(O.a)({},e),n);case K:case $:return Object(O.a)(Object(O.a)({},e),{},{connected:!1});default:return e}},re="ORDER_INFO_PENING",ce="ORDER_INFO_FULFILLED",ae="ORDER_INFO_ERROR",ie="ORDER_INFO_CLEAR",se={order:void 0,isPending:!1},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return Object(O.a)(Object(O.a)({},e),{},{isPending:!0});case ce:var n=t.payload;return Object(O.a)(Object(O.a)({},e),{},{isPending:!1,order:n});case ae:case ie:return se;default:return e}},le="HISTORY_WS_SUCCESS",ue="HISTORY_WS_CLOSED",de="HISTORY_WS_ERROR",je="HISTORY_WS_MESSAGE",be={connected:!1,orders:[],total:0,totalToday:0},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Object(O.a)(Object(O.a)({},e),{},{connected:!0});case je:var n=t.payload;return Object(O.a)(Object(O.a)({},e),n);case de:case ue:return Object(O.a)(Object(O.a)({},e),{},{connected:!1});default:return e}},pe={lastErr:void 0},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;if(t.type===b){var n=t.payload;return Object(O.a)(Object(O.a)({},e),{},{lastErr:n})}return e},xe=Object(j.b)({ingredients:k,burgerConstructor:D,order:H,auth:G,feed:ne,orderInfo:oe,history:me,forgotPassword:Q,common:Oe}),he=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,j.c),fe=he(Object(j.a)(u.a,p,f("wss://norma.nomoreparties.space/orders/all","FEED"),f("wss://norma.nomoreparties.space/orders","HISTORY",!0))),_e=Object(j.d)(xe,fe),ve=function(){return Object(d.b)()},ge=d.c,ye=_e,Ne=n(8),we=n.n(Ne),Ee=n(15),ke=n(121),Se=n(122),Te=n(141),Ce=n(142),Re="https://norma.nomoreparties.space/api",Ie=function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)},Le=function(e){Object(Se.a)(n,e);var t=Object(Te.a)(n);function n(){var e;Object(ke.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).response=void 0,e}return n}(Object(Ce.a)(Error)),De={},Me={"Content-Type":"application/json",Accept:"application/json"},Fe=function(){var e=Object(Ee.a)(we.a.mark((function e(t){var n,r,c,a,i;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,r=t.method,c=t.data,a=t.options,i=Object(O.a)(Object(O.a)({},Me),a.headers),!a.onRequest){e.next=5;break}return e.next=5,a.onRequest(i);case 5:return e.abrupt("return",fetch(n,Object(O.a)({method:r,headers:i},"GET"!==r&&c&&{body:JSON.stringify(c)})).then((function(e){return e.ok?e.json():e.text().then((function(t){var n=new Le("Status: ".concat(e.status,". Message: ").concat(t));try{n.response=JSON.parse(t)}catch(r){n.response=t}return Promise.reject(n)}))})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(O.a)(Object(O.a)({},De),t);return{get:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fe({url:"".concat(e).concat(t),method:"GET",options:Object(O.a)(Object(O.a)({},n),r)})},post:function(t,r){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Fe({url:"".concat(e).concat(t),method:"POST",data:r,options:Object(O.a)(Object(O.a)({},n),c)})},put:function(t,r){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Fe({url:"".concat(e).concat(t),method:"PUT",data:r,options:Object(O.a)(Object(O.a)({},n),c)})},patch:function(t,r){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Fe({url:"".concat(e).concat(t),method:"PATCH",data:r,options:Object(O.a)(Object(O.a)({},n),c)})},delete:function(t,r){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Fe({url:"".concat(e).concat(t),method:"DELETE",data:r,options:Object(O.a)(Object(O.a)({},n),c)})}}},ze=function(e){var t=e.split(" ")[1],n=Ie(t).exp;return Date.now()/1e3>n},Pe={public:Ae(Re),private:Ae(Re,{onRequest:function(){var e=Object(Ee.a)(we.a.mark((function e(t){var n,r,c,a,i,s;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=null===ye||void 0===ye||null===(n=ye.getState())||void 0===n?void 0:n.auth.accessToken)||ze(r)){e.next=4;break}return t.authorization=r,e.abrupt("return");case 4:if(c=localStorage.getItem("refreshToken")){e.next=7;break}throw new Error("Refresh token is missing");case 7:return e.next=9,Pe.public.post("/auth/token",{token:c});case 9:a=e.sent,localStorage.setItem("refreshToken",a.refreshToken),i=ye.getState(),s=i.auth,ye.dispatch(qe(Object(O.a)(Object(O.a)({},s),{},{accessToken:a.accessToken}))),t.authorization=a.accessToken;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})},He=Pe,Ue={ingredients:{list:function(){return He.public.get("/ingredients").then((function(e){return e.data}))}},order:{create:function(e){return He.private.post("/orders",{ingredients:e}).then((function(e){return{name:e.name,order:e.order}}))},get:function(e){return He.public.get("/orders/".concat(e)).then((function(e){var t=e.orders;return t.length>0?t[0]:void 0}))}},auth:{register:function(e,t,n){return He.public.post("/auth/register",{email:e,password:t,name:n})},login:function(e,t){return He.public.post("/auth/login",{email:e,password:t})},logout:function(e){return He.public.post("/auth/logout",{token:e})},get:function(){return He.private.get("/auth/user")},update:function(e){return He.private.patch("/auth/user",e)},refresh:function(e){return He.public.post("/auth/token",{token:e})}},password:{getCode:function(e){return He.public.post("/password-reset",{email:e})},reset:function(e,t){return He.public.post("/password-reset/reset",{password:e,token:t})}}},We=Ue,Be=function(){return{type:W}},qe=function(e){return{type:B,payload:e}},Ge=function(){return{type:U}},Ve=function(){var e=ge((function(e){return{user:e.auth.user,isLoading:e.auth.isLoading}})),t=e.user,n=e.isLoading,r=ve();return{login:function(e,t){return r(function(e,t){return function(){var n=Object(Ee.a)(we.a.mark((function n(r){var c,a,i,s;return we.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(Ge()),n.prev=1,n.next=4,We.auth.login(e,t);case 4:c=n.sent,a=c.user,i=c.accessToken,s=c.refreshToken,console.log("here"),r(qe({user:a,accessToken:i})),localStorage.setItem("refreshToken",s),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(1),r(m(n.t0)),r(Be());case 17:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}()}(e,t))},logout:function(e){return r(function(e){return function(){var t=Object(Ee.a)(we.a.mark((function t(n){var r;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=localStorage.getItem("refreshToken")){t.next=3;break}return t.abrupt("return");case 3:return n(Ge()),t.prev=4,t.next=7,We.auth.logout(r);case 7:localStorage.removeItem("refreshToken"),n(qe(void 0)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),n(m(t.t0)),n(Be());case 15:e&&e();case 16:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e){return t.apply(this,arguments)}}()}(e))},register:function(e,t,n){return r(function(e,t,n){return function(){var r=Object(Ee.a)(we.a.mark((function r(c){var a,i,s,o;return we.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c(Ge()),r.prev=1,r.next=4,We.auth.register(e,t,n);case 4:a=r.sent,i=a.user,s=a.accessToken,o=a.refreshToken,c(qe({user:i,accessToken:s})),localStorage.setItem("refreshToken",o),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(1),c(m(r.t0)),c(Be());case 16:case"end":return r.stop()}}),r,null,[[1,12]])})));return function(e){return r.apply(this,arguments)}}()}(e,t,n))},getUser:function(){return r(function(){var e=Object(Ee.a)(we.a.mark((function e(t,n){var r,c,a,i;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),c=r.auth,t(Ge()),e.prev=2,e.next=5,We.auth.get();case 5:a=e.sent,i=a.user,t(qe(Object(O.a)(Object(O.a)({},c),{},{user:i}))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),t(m(void 0)),t(Be());case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}())},update:function(e){return r(function(e){return function(){var t=Object(Ee.a)(we.a.mark((function t(n,r){var c,a,i,s;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r(),a=c.auth,n(Ge()),t.prev=2,t.next=5,We.auth.update(e);case 5:i=t.sent,s=i.user,n(qe(Object(O.a)(Object(O.a)({},a),{},{user:s}))),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),n(m(t.t0)),n(Be());case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))},user:t,isLoading:n}},Ye=n(0),Xe=function(e){var t=e.width,n=void 0===t?86:t,r=e.height,c=void 0===r?86:r;return Object(Ye.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:c,stroke:"currentColor",viewBox:"0 0 38 38",children:Object(Ye.jsxs)("g",{fill:"none",fillRule:"evenodd",strokeWidth:"2",transform:"translate(1 1)",children:[Object(Ye.jsx)("circle",{cx:"18",cy:"18",r:"18",strokeOpacity:"0.5"}),Object(Ye.jsx)("path",{d:"M36 18c0-9.94-8.06-18-18-18",children:Object(Ye.jsx)("animateTransform",{attributeName:"transform",dur:"1s",from:"0 18 18",repeatCount:"indefinite",to:"360 18 18",type:"rotate"})})]})})},Je=n(123),Qe=n.n(Je),Ze=function(){return Object(Ye.jsx)("div",{className:Qe.a.loader,children:Object(Ye.jsx)(Xe,{width:48,height:48})})},Ke=function(e){var t=e.isLoading,n=void 0!==t&&t,r=e.children;return Object(Ye.jsxs)(Ye.Fragment,{children:[r,n&&Object(Ye.jsx)(Ze,{})]})},$e=n(13),et=["children"],tt=function(e){var t=e.children,n=Object(x.a)(e,et),r=Ve().user,c=Object($e.h)();return Object(Ye.jsx)($e.b,Object(O.a)(Object(O.a)({},n),{},{children:r?t:Object(Ye.jsx)($e.a,{to:{pathname:"/login",state:{from:c}}})}))},nt=n(235),rt=n(140),ct=n(14),at=n(3),it=n.n(at),st=n(86),ot=n.n(st),lt=n(87),ut=n.n(lt),dt=function(e){var t=e.className,n=e.current,r=e.onClick,c=e.children,a=e.tabs;return Object(Ye.jsxs)("div",{className:t,children:[Object(Ye.jsx)("div",{className:ut.a["tabs-list"],children:Object.keys(a).map((function(e){return Object(Ye.jsx)("div",{className:ut.a["tab-item"],children:Object(Ye.jsx)(o.Tab,{value:e,active:e===n,onClick:r,children:a[e]})},e)}))}),c]})},jt=n(143),bt=n(236),mt=n(46),pt=n.n(mt),Ot=function(e){var t=e.ingredient,n=e.onClick,r=t.name,c=t.price,a=t.count,i=t.image,s=t.type,l=Object(bt.a)({type:"bun"===s?"bun":"ingredient",item:Object(O.a)(Object(O.a)({},t),{},{id:Object(jt.a)()})}),u=Object(ct.a)(l,2)[1];return Object(Ye.jsxs)("div",{"data-test":"ingredient-card",className:pt.a.card,onClick:n,ref:u,children:[Object(Ye.jsxs)("div",{className:"pl-4 pr-4",children:[Object(Ye.jsx)("img",{className:pt.a.image,src:i,alt:r}),a&&Object(Ye.jsx)(o.Counter,{count:a,size:"default"})]}),Object(Ye.jsxs)("div",{className:it()(pt.a.price,"mt-1 mb-1"),children:[Object(Ye.jsx)("span",{className:"text_type_digits-default",children:c}),Object(Ye.jsx)(o.CurrencyIcon,{type:"primary"})]}),Object(Ye.jsx)("h5",{className:it()(pt.a.title,"text_type_main-default"),children:r})]})},xt=n(126),ht=n.n(xt),ft=function(e){var t=e.clientWidth,n=e.clientHeight,r=e.scrollWidth;return e.scrollHeight>n||r>t},_t=function(e){var t=e.className,n=e.children,r=e.threshold,a=void 0===r?40:r,i=e.onScroll,s=e.grow,o=void 0!==s&&s,l=Object(c.useRef)(null),u=Object(c.useCallback)((function(){var e=l.current;if(e){var t=e.getBoundingClientRect(),n="".concat(window.innerHeight-t.top-a,"px");if(e.style.height=o?n:e.style.height,ft(e))return e.classList.add("pr-2"),void e.classList.remove("pr-4");e.classList.remove("pr-2"),e.classList.add("pr-4")}}),[a,o]);return Object(c.useEffect)((function(){var e=function(){i&&i(l.current)},t=l.current;return t&&t.addEventListener("scroll",e),window.addEventListener("resize",u),function(){t&&t.removeEventListener("scroll",e),window.removeEventListener("resize",u)}}),[u,i]),Object(c.useEffect)((function(){u()}),[n,u]),Object(Ye.jsx)("div",{className:it()(ht.a.scroll,"custom-scroll pr-2",t),ref:l,children:n})},vt=function(e,t){var n=0;return function(){var r=Date.now();r-n>=t&&(e.apply(void 0,arguments),n=r)}},gt=n(10),yt=n(47),Nt=n.n(yt),wt=function(e){var t,n=e.variant,r=void 0===n?"rectangular":n,c=e.width,a=void 0===c?"100%":c,i=e.height,s=void 0===i?"auto":i,o=e.className,l=it()(Nt.a.skeleton,(t={},Object(gt.a)(t,Nt.a.text,"text"===r),Object(gt.a)(t,Nt.a.rounded,"rounded"===r),Object(gt.a)(t,Nt.a.rectangular,"rectangular"===r),t),o);return Object(Ye.jsx)("div",{className:l,style:{width:a,height:s}})},Et=n(89),kt=n.n(Et),St=function(e){var t=e.count,n=void 0===t?4:t,r=Object(c.useMemo)((function(){return Object(S.a)(Array(n).keys())}),[n]);return Object(Ye.jsxs)("div",{children:[Object(Ye.jsx)(wt,{variant:"text",height:"25px",width:"20%",className:"mt-10 mb-6"}),Object(Ye.jsx)("div",{className:kt.a.grid,children:r.map((function(e){return Object(Ye.jsxs)("div",{className:kt.a.card,children:[Object(Ye.jsx)(wt,{variant:"rectangular",height:"100px"}),Object(Ye.jsx)(wt,{width:"60%",className:"mt-4",height:"15px"}),Object(Ye.jsx)(wt,{width:"40%",className:"mt-2",height:"15px"})]},e)}))})]})},Tt=function(e){return{type:v,payload:e}},Ct=function(e){return{type:N,payload:e}},Rt=function(e,t){return"bun"===e.type&&["sauce","main"].includes(t.type)?-1:["sauce","main"].includes(e.type)&&"bun"===t.type?1:0},It=function(){var e=ve(),t=ge((function(e){return e.ingredients})),n=t.items,r=t.isLoading;return{items:n,isLoading:r,getItems:function(){return e(function(){var e=Object(Ee.a)(we.a.mark((function e(t,n){var r;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().ingredients.isLoading){e.next=3;break}return e.abrupt("return");case 3:return t({type:_}),e.prev=4,e.next=7,We.ingredients.list();case 7:r=e.sent,t(Tt(r)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),t(m(e.t0)),t({type:g});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,n){return e.apply(this,arguments)}}())},collect:function(e){var t=n.map((function(e){return Object(O.a)({},e)}));return e.map((function(e){return t.find((function(t){return t._id===e}))})).reduce((function(e,t){var n=e.find((function(e){return e._id===(null===t||void 0===t?void 0:t._id)}));return n?(n.count=n.count?n.count+1:1,e):(t&&(t.count=1,e.push(t)),e)}),[]).sort(Rt)},calculateAmount:function(e){return e.reduce((function(e,t){return e+(t?t.price*(t.count||1):0)}),0)}}},Lt=function(){var e={bun:"\u0411\u0443\u043b\u043a\u0438",sauce:"\u0421\u043e\u0443\u0441\u044b",main:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"},t=Object(c.useRef)({bun:null,sauce:null,main:null}),n=Object(c.useState)("bun"),r=Object(ct.a)(n,2),a=r[0],i=r[1],s=It(),o=s.items,l=s.isLoading,u=Ve().isLoading,d=Object($e.g)(),j=Object($e.h)(),b=Object(c.useMemo)((function(){return o.reduce((function(e,t){return e[t.type]=[].concat(Object(S.a)(e[t.type]),[t]),e}),{bun:[],sauce:[],main:[]})}),[o]),m=function(e){return function(){d.push({pathname:"/ingredients/".concat(e._id),state:{background:j}})}},p=function(e){return b[e].map((function(e){return Object(Ye.jsx)(Ot,{ingredient:e,onClick:m(e)},e._id)}))},O=Object(c.useCallback)(vt((function(e){var n=Object.keys(t.current).reduce((function(n,r){var c=t.current[r];if(!c)return n;var a=Math.abs(e.scrollTop-c.offsetTop);return(n&&a<n.diff||!n)&&(n={el:c,diff:a,type:r}),n}),null);n&&i(n.type)}),100),[]);return Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)("h2",{className:"text text_type_main-large mt-10 mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(Ye.jsx)(dt,{current:a,onClick:function(e){var n=t.current[e];n&&n.scrollIntoView(),i(e)},tabs:e,children:l||u?Object(Ye.jsx)(St,{}):Object(Ye.jsx)(_t,{onScroll:O,className:"pr-4",grow:!0,children:Object.keys(b).map((function(n){return Object(Ye.jsxs)("div",{ref:function(e){return t.current[n]=e},children:[Object(Ye.jsx)("h5",{className:it()("text text_type_main-medium pt-10 pb-6",ot.a["tabs-label"],{text_color_inactive:n!==a}),children:e[n]}),Object(Ye.jsx)("div",{className:ot.a.grid,children:p(n)})]},n)}))})})]})},Dt=n(48),Mt=n.n(Dt),Ft=n.p+"static/media/order-completed.39d47e08.svg",At=n(64),zt=function(e){var t=e.prepend,n=void 0===t?"Stellar Burgers":t,r=e.title,c=void 0===r?"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 \u0431\u0443\u0440\u0433\u0435\u0440\u043e\u0432":r,a=e.description,i={title:n+(c?" | "+c:""),description:void 0===a?"\u0411\u0443\u0440\u0433\u0435\u0440\u043d\u0430\u044f \u043d\u0430 \u043a\u0440\u0430\u044e \u0432\u0441\u0435\u043b\u0435\u043d\u043d\u043e\u0439!":a};return Object(Ye.jsxs)(At.a,{children:[Object(Ye.jsx)("title",{children:i.title}),Object(Ye.jsx)("meta",{name:"description",content:i.description,"data-react-helmet":!0})]})},Pt=function(e){var t=e.orderId,n=e.status;return Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)(zt,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(Ye.jsx)("span",{className:it()(Mt.a.id,"text text_glowing text_type_digits-large"),children:t}),Object(Ye.jsx)("h5",{className:it()(Mt.a.title,"text text_type_main-medium mt-8 mb-15"),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(Ye.jsx)("img",{className:"mb-15",src:Ft,alt:"\u0417\u0430\u043a\u0430\u0437 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f/\u0433\u043e\u0442\u043e\u0432"}),Object(Ye.jsx)("h6",{className:it()(Mt.a.status,"text text_type_main-default mb-2"),children:n}),Object(Ye.jsx)("p",{className:it()(Mt.a.description,"text text_type_main-default text_color_inactive"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Ht=n(91),Ut=n.n(Ht),Wt=n(129),Bt=n.n(Wt),qt=function(e){var t=e.className,n=e.onClick;return Object(Ye.jsx)("button",{className:it()(Bt.a.btn,t),type:"button",onClick:n,children:Object(Ye.jsx)(o.CloseIcon,{type:"primary"})})},Gt=n(130),Vt=n.n(Gt),Yt=function(e){var t=e.onRequestClose;return Object(Ye.jsx)("div",{"data-test":"modal-overlay",className:Vt.a.overlay,onClick:t})},Xt="modal-is-shown",Jt=function(e){var t=e.className,n=e.children,r=e.onRequestClose,a=Object(c.useRef)(document.querySelector("#modals"));return Object(c.useEffect)((function(){return document.body.classList.add(Xt),function(){document.body.classList.remove(Xt)}}),[]),Object(c.useEffect)((function(){var e=function(e){"Escape"===e.code&&(e.stopPropagation(),r())};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[r]),a.current?s.a.createPortal(Object(Ye.jsxs)("div",{"data-test":"modal",className:Ut.a.modal,children:[Object(Ye.jsx)(Yt,{onRequestClose:r}),Object(Ye.jsxs)("div",{className:"".concat(Ut.a.content," ").concat(t),children:[Object(Ye.jsx)(qt,{onClick:r}),n]})]}),a.current):null},Qt=n(237),Zt=n(33),Kt=n.n(Zt),$t=function(e){var t=e.type,n=void 0===t?"top":t,r=e.bun,c=void 0===r?null:r,a=e.onDrop,i=e.className,s=Object(Qt.a)({accept:"bun",drop:a,collect:function(e){return{canDrop:e.canDrop()}}}),l=Object(ct.a)(s,2),u=l[0].canDrop,d=l[1];return Object(Ye.jsxs)("div",{className:it()("pr-4","pl-12",Kt.a.item,i),ref:d,"data-test":"bun-dropzone",children:[c?Object(Ye.jsx)(o.ConstructorElement,{thumbnail:c.image,price:c.price,text:"".concat(c.name," ").concat("top"===n?"(\u0432\u0435\u0440\u0445)":"(\u043d\u0438\u0437)"),type:n,isLocked:!0}):Object(Ye.jsx)("div",{className:it()("text","text_type_main-default",Kt.a.placeholder,Kt.a[n]),children:!u&&"\u041c\u0435\u0441\u0442\u043e \u0434\u043b\u044f \u0431\u0443\u043b\u043a\u0438"}),u&&Object(Ye.jsx)("div",{className:it()(Kt.a.overlay,Kt.a[n]),children:Object(Ye.jsx)("span",{className:it()("text","text_type_main-medium",Kt.a["overlay-title"]),children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443"})})]})},en=n(38),tn=n.n(en),nn=n(92),rn=n.n(nn),cn=function(e){var t=e.className,n=e.ingredient,r=e.index,a=e.onDelete,i=e.moveItem,s=Object(c.useRef)(null),l=n.name,u=n.price,d=n.image,j=Object(bt.a)({type:"sortable-ingredient",item:{index:r,id:n.id}}),b=Object(ct.a)(j,3),m=b[1],p=b[2],O=Object(Qt.a)({accept:"sortable-ingredient",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var n;if(s.current){var c=e.index,a=r;if(c!==a){var o=null===(n=s.current)||void 0===n?void 0:n.getBoundingClientRect(),l=(o.bottom-o.top)/2,u=t.getClientOffset();if(u){var d=u.y-o.top;c<a&&d<l||c>a&&d>l||(i(c,a),e.index=a)}}}}}),x=Object(ct.a)(O,2),h=x[0].handlerId;return(0,x[1])(p(s)),Object(Ye.jsxs)("div",{className:it()(rn.a.item,t),ref:s,children:[Object(Ye.jsx)("div",{className:rn.a.handle,ref:m,"data-handler-id":h,children:Object(Ye.jsx)(o.DragIcon,{type:"primary"})}),Object(Ye.jsx)(o.ConstructorElement,{text:l,price:u,thumbnail:d,handleClose:a})]})},an=function(e){var t=e.items,n=e.onDrop,r=e.onItemDelete,c=e.moveItem,a=Object(Qt.a)({accept:"ingredient",collect:function(e){return{canDrop:e.canDrop()}},drop:n}),i=Object(ct.a)(a,2),s=i[0].canDrop,o=i[1];return Object(Ye.jsxs)("div",{className:it()(tn.a.wrapper,"mt-4","mb-4"),ref:o,"data-test":"ingredient-dropzone",children:[Object(Ye.jsx)(_t,{className:it()(tn.a.scroll,"pl-4"),children:t.length>0?t.map((function(e,n){return Object(Ye.jsx)(cn,{className:it()({"mb-4":n<t.length-1}),ingredient:e,index:n,onDelete:function(){return r(e,n)},moveItem:c},e.id)})):Object(Ye.jsx)("div",{className:it()(tn.a.placeholder,"ml-8"),children:!s&&Object(Ye.jsx)("span",{className:"text text_type_main-default",children:"\u041c\u0435\u0441\u0442\u043e \u0434\u043b\u044f \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u043e\u0432"})})}),s&&Object(Ye.jsx)("div",{className:"".concat(tn.a.overlay),children:Object(Ye.jsx)("span",{className:it()("text","text_type_main-medium",tn.a["overlay-title"]),children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b"})})]})},sn=n(131),on=n.n(sn),ln=n(132),un=n.n(ln),dn=function(e){var t,n=e.amount,r=e.className,c=e.type,a=void 0===c?"default":c,i=it()("text mr-2",(t={},Object(gt.a)(t,"text_type_digits-medium","medium"===a),Object(gt.a)(t,"text_type_digits-default","default"===a),t));return Object(Ye.jsxs)("div",{className:it()(un.a.price,r),children:[Object(Ye.jsx)("span",{className:i,children:n}),Object(Ye.jsx)(o.CurrencyIcon,{type:"primary"})]})},jn=function(e){var t=e.totalPrice,n=e.onSubmit,r=e.canOrder,c=e.isLoading;return Object(Ye.jsxs)("div",{className:it()(on.a.buttons,"mt-10 pr-4"),children:[Object(Ye.jsx)(dn,{amount:t,className:"mr-10",type:"medium"}),r&&Object(Ye.jsx)(o.Button,{type:"primary",size:"large",onClick:n,disabled:c,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})},bn=function(){var e=Object(d.b)(),t=Ve().user,n=Object($e.g)(),r=Object($e.h)(),a=Object(d.c)((function(e){return{order:e.order.order,isLoading:e.order.isLoading,items:e.burgerConstructor.items,bun:e.burgerConstructor.bun}})),i=a.order,s=a.items,o=a.bun,l=a.isLoading,u=Object(c.useMemo)((function(){return s.reduce((function(e,t){return e+t.price}),o?2*o.price:0)}),[s,o]),j=function(t){var n;e(function(e){return{type:T,payload:e}}(t)),"bun"===t.type&&o&&e(Ct(o._id)),e((n=t._id,{type:y,payload:n}))},b=s.length>0&&!!o;return Object(Ye.jsxs)("div",{className:"pt-25",children:[Object(Ye.jsx)($t,{type:"top",bun:o,onDrop:j}),Object(Ye.jsx)(an,{items:s,onDrop:j,onItemDelete:function(t,n){window.confirm("\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?")&&(e(function(e){return{type:C,payload:e}}(n)),e(Ct(t._id)))},moveItem:function(t,n){return e(function(e,t){return{type:R,payload:{dragIndex:e,hoverIndex:t}}}(t,n))}}),Object(Ye.jsx)($t,{type:"bottom",bun:o,onDrop:j}),Object(Ye.jsx)(jn,{totalPrice:u,isLoading:l,onSubmit:function(){t?e(function(){var e=Object(Ee.a)(we.a.mark((function e(t,n){var r,c,a,i,s,o;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),c=r.burgerConstructor,a=c.bun,i=c.items,!r.order.isLoading&&a){e.next=3;break}return e.abrupt("return");case 3:if(n().auth.user){e.next=6;break}return e.abrupt("return");case 6:return t({type:M}),s=[].concat(Object(S.a)(i.map((function(e){return e._id}))),[a._id,a._id]),e.prev=8,e.next=11,We.order.create(s);case 11:o=e.sent,t((l={name:o.name,id:o.order.number},{type:F,payload:l})),t({type:I}),t({type:w}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),t(m(e.t0)),t({type:A});case 21:case"end":return e.stop()}var l}),e,null,[[8,17]])})));return function(t,n){return e.apply(this,arguments)}}()):n.push({pathname:"/login",state:{from:r}})},canOrder:b}),i&&i.id&&Object(Ye.jsx)(Jt,{className:"pt-30 pr-25 pb-30 pl-25",onRequestClose:function(){return e({type:z})},children:Object(Ye.jsx)(Pt,{orderId:i.id,status:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"})})]})},mn=n(93),pn=n.n(mn),On=function(e){var t=e.className,n=e.mod,r=void 0===n?null:n,c=e.children,a=e.align,i=it()(pn.a["col".concat(r?"-".concat(r):"")],Object(O.a)({},a&&Object(gt.a)({},pn.a[a],a)),t);return Object(Ye.jsx)("div",{className:i,children:c})},xn=n(133),hn=n.n(xn),fn=function(e){var t=e.className,n=e.children;return Object(Ye.jsx)("div",{className:it()(hn.a.row,t),children:n})},_n=n(134),vn=n.n(_n),gn=function(e){var t=e.className,n=e.children;return Object(Ye.jsx)("div",{className:it()(vn.a.container,t),children:n})},yn=n(94),Nn=n.n(yn),wn=Object(c.createContext)({}),En=wn.Provider,kn=function(e){var t=e.className,n=e.children,r=e.direction,a=void 0===r?"row":r,i=e.size,s=void 0===i?"default":i,o=it()(Object(O.a)({},a&&Object(gt.a)({},Nn.a[a],a)),Nn.a.menu,t),l=Object(c.useMemo)((function(){return{direction:a,size:s}}),[a,s]);return Object(Ye.jsx)(En,{value:l,children:Object(Ye.jsx)("nav",{className:o,children:n})})},Sn=n(67),Tn=n.n(Sn),Cn=function(e){var t,n=e.className,r=e.to,a=e.startIcon,i=e.label,s=Object($e.j)({path:r,exact:!0}),o=Object(c.useContext)(wn),u=o.direction,d=o.size,j=it()("pr-5 pt-4 pb-4 text","big"===d?"text_type_main-medium":"text_type_main-default",Tn.a["menu-item"],(t={},Object(gt.a)(t,Tn.a.active,s),Object(gt.a)(t,"pl-5","row"===u),Object(gt.a)(t,"pr-5","row"===u),t),n);return Object(Ye.jsxs)(l.b,{className:j,to:r,children:[a&&Object(Ye.jsx)("div",{className:Tn.a.icon,children:a}),i]})},Rn=n(95),In=n.n(Rn),Ln=function(e){var t=e.text,n=e.onClose;return Object(Ye.jsxs)("div",{className:In.a.notice,children:[Object(Ye.jsx)("span",{className:"text text_type_main-default",children:t}),Object(Ye.jsx)("button",{className:In.a.close,onClick:n,type:"button",children:Object(Ye.jsx)(o.CloseIcon,{type:"primary"})})]})},Dn=n(96),Mn=n.n(Dn),Fn=function(){var e=ge((function(e){var t=e.common.lastErr;return"object"===typeof t?t.response?t.response.message:t.message:t})),t=ve();return{error:e,clearError:function(){t(m(void 0))}}},An=function(){var e=Fn(),t=e.error,n=e.clearError;return Object(Ye.jsxs)("header",{className:it()(Mn.a.header,"pb-4 pt-4"),children:[Object(Ye.jsxs)(gn,{className:Mn.a.container,children:[Object(Ye.jsxs)(kn,{children:[Object(Ye.jsx)(Cn,{startIcon:Object(Ye.jsx)(o.BurgerIcon,{type:"primary"}),className:"mr-2 pl-0",label:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",to:"/"}),Object(Ye.jsx)(Cn,{startIcon:Object(Ye.jsx)(o.ListIcon,{type:"primary"}),label:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",to:"/feed"})]}),Object(Ye.jsx)(l.b,{to:"/",children:Object(Ye.jsx)(o.Logo,{})}),Object(Ye.jsx)(kn,{children:Object(Ye.jsx)(Cn,{startIcon:Object(Ye.jsx)(o.ProfileIcon,{type:"primary"}),className:"ml-auto pr-0",label:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",to:"/profile"})})]}),t&&Object(Ye.jsx)(Ln,{onClose:n,text:t})]})},zn=function(e){var t=e.className,n=e.children;return Object(Ye.jsx)("main",{className:t,children:Object(Ye.jsx)(gn,{children:n})})},Pn=function(e){var t=e.children;return Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)(An,{}),Object(Ye.jsx)(zn,{children:t})]})},Hn=function(){var e=Object(d.c)((function(e){return e.order.isLoading}));return Object(Ye.jsx)(Ke,{isLoading:e,children:Object(Ye.jsx)(Pn,{children:Object(Ye.jsx)(nt.a,{backend:rt.a,children:Object(Ye.jsxs)(fn,{children:[Object(Ye.jsx)(On,{mod:"6",children:Object(Ye.jsx)(Lt,{})}),Object(Ye.jsx)(On,{mod:"6",children:Object(Ye.jsx)(bn,{})})]})})})})},Un=n(49),Wn=n.n(Un),Bn=function(e){var t=e.className,n=e.onSubmit,r=e.header,c=e.body,a=e.footer,i=it()(Wn.a.form,"mt-30",t);return Object(Ye.jsxs)("form",{onSubmit:n,className:i,children:[r&&Object(Ye.jsx)("div",{className:Wn.a.header,children:r}),c&&Object(Ye.jsx)("div",{className:Wn.a.body,children:c}),a&&Object(Ye.jsx)("div",{className:Wn.a.footer,children:a})]})},qn=["placeholder","error","errorText","value","onChange"],Gn=Object(c.forwardRef)((function(e,t){var n=e.placeholder,r=e.error,a=void 0!==r&&r,i=e.errorText,s=e.value,l=e.onChange,u=Object(x.a)(e,qn),d=Object(c.useState)(!0),j=Object(ct.a)(d,2),b=j[0],m=j[1];return Object(Ye.jsx)(o.Input,Object(O.a)({ref:t,type:b?"password":"text",icon:b?"ShowIcon":"HideIcon",onIconClick:function(){return m(!b)},value:s,placeholder:n,error:a,errorText:i,onChange:l},u))})),Vn=n(135),Yn=n.n(Vn),Xn=function(e){return!!e},Jn=function(e){return e.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},Qn=function(e){var t=e.initialValues,n=Object(c.useState)(Object(O.a)({},t)),r=Object(ct.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)({}),o=Object(ct.a)(s,2),l=o[0],u=o[1],d=Object(c.useState)({}),j=Object(ct.a)(d,2),b=j[0],m=j[1],p=Object(c.useState)({}),x=Object(ct.a)(p,2),h=x[0],f=x[1],_=Object(c.useState)(!1),v=Object(ct.a)(_,2),g=v[0],y=v[1],N=Object(c.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};return Object.keys(l).forEach((function(n){var r=b[n];if(!e||r){var c=a[n],i=l[n];if(i){if("undefined"!==typeof i.required)if(!Xn(c))return void(t[n]="boolean"===typeof i.required?"\u0422\u0440\u0435\u0431\u0443\u0435\u043c\u043e\u0435 \u043f\u043e\u043b\u0435":i.required.msg);if("undefined"!==typeof i.email)Jn(c)||(t[n]="boolean"===typeof i.email?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 e-mail":i.email.msg)}}})),t}),[l,b,a]);Object(c.useEffect)((function(){var e=N();f(e)}),[a,b,N]),Object(c.useEffect)((function(){y(!Yn()(t,a))}),[a,t]);return{register:function(e,t){t&&!l[e]&&u(Object(O.a)(Object(O.a)({},l),{},Object(gt.a)({},e,t)));return{name:e,onChange:function(t){i(Object(O.a)(Object(O.a)({},a),{},Object(gt.a)({},e,t.target.value)))},onBlur:function(){b[e]||m(Object(O.a)(Object(O.a)({},b),{},Object(gt.a)({},e,!0)))},value:a[e]}},handleSubmit:function(e){return function(t){t.preventDefault(),m(Object.keys(a).reduce((function(e,t){return Object(O.a)(Object(O.a)({},e),{},Object(gt.a)({},t,!0))}),{}));var n=N(!1);Object.keys(n).length||e(a)}},errors:h,fields:a,setFields:i,isDirty:g}},Zn=function(){var e=Ve(),t=Qn({initialValues:{name:"",password:"",email:""}}),n=t.register,r=t.handleSubmit,c=t.errors;return e.user?Object(Ye.jsx)($e.a,{to:{pathname:"/"}}):Object(Ye.jsxs)(Pn,{children:[Object(Ye.jsx)(zt,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(Ye.jsx)(Bn,{onSubmit:r((function(t){var n=t.email,r=t.password,c=t.name;return e.register(n,r,c)})),header:Object(Ye.jsx)("h5",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),body:Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)("div",{className:"mb-6",children:Object(Ye.jsx)(o.Input,Object(O.a)(Object(O.a)({},n("name",{required:!0})),{},{placeholder:"\u0418\u043c\u044f",error:!!c.name,errorText:c.name}))}),Object(Ye.jsx)("div",{className:"mb-6",children:Object(Ye.jsx)(o.Input,Object(O.a)(Object(O.a)({},n("email",{required:!0,email:!0})),{},{placeholder:"E-mail",error:!!c.email,errorText:c.email}))}),Object(Ye.jsx)("div",{className:"mb-6",children:Object(Ye.jsx)(Gn,Object(O.a)(Object(O.a)({},n("password",{required:!0})),{},{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",error:!!c.password,errorText:c.password}))}),Object(Ye.jsx)(o.Button,{size:"large",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),footer:Object(Ye.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",Object(Ye.jsx)(l.b,{className:"link",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},Kn=function(){var e,t,n,r=Ve(),c=r.login,a=r.user,i=Object($e.h)(),s=Qn({initialValues:{email:"",password:""}}),u=s.register,d=s.handleSubmit,j=s.errors;return a?Object(Ye.jsx)($e.a,{to:Object(O.a)({pathname:(null===(e=i.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/"},i.state&&{state:null===(n=i.state.from)||void 0===n?void 0:n.state})}):Object(Ye.jsxs)(Pn,{children:[Object(Ye.jsx)(zt,{title:"\u0412\u0445\u043e\u0434"}),Object(Ye.jsx)(fn,{children:Object(Ye.jsx)(On,{mod:"auto",align:"center",children:Object(Ye.jsx)(Bn,{onSubmit:d((function(e){var t=e.email,n=e.password;return c(t,n)})),header:Object(Ye.jsx)("h5",{className:"text text_type_main-medium mb-6",children:"\u0412\u0445\u043e\u0434"}),body:Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)("div",{className:"mb-6",children:Object(Ye.jsx)(o.Input,Object(O.a)({placeholder:"E-mail",error:!!j.email,errorText:j.email},u("email",{required:!0,email:!0})))}),Object(Ye.jsx)("div",{className:"mb-6",children:Object(Ye.jsx)(Gn,Object(O.a)({placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",error:!!j.password,errorText:j.password},u("password",{required:!0})))}),Object(Ye.jsx)(o.Button,{size:"large",htmlType:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]}),footer:Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?\xa0",Object(Ye.jsx)(l.b,{className:"link",to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(Ye.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0",Object(Ye.jsx)(l.b,{className:"link",to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})})})]})},$n=function(){return{type:V}},er=function(){return{type:Y}},tr=function(){return{type:X}},nr=function(){var e=Object(d.c)((function(e){return{isLoading:e.forgotPassword.isLoading,error:e.forgotPassword.error,step:e.forgotPassword.step}})),t=e.isLoading,n=e.error,r=e.step,c=Object(d.b)();return{isLoading:t,error:n,step:r,getCode:function(e){return c(function(e){return function(){var t=Object(Ee.a)(we.a.mark((function t(n){return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(er()),t.prev=1,t.next=4,We.password.getCode(e);case 4:n($n()),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),n(m(t.t0)),n(tr());case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}(e))},reset:function(e,t){return c(function(e,t){return function(){var n=Object(Ee.a)(we.a.mark((function n(r){return we.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(er()),n.prev=1,n.next=4,We.password.reset(e,t);case 4:r($n()),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(1),r(m(n.t0)),r(tr());case 11:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e){return n.apply(this,arguments)}}()}(e,t))}}},rr=function(){var e=nr(),t=e.step,n=e.reset,c=e.isLoading,a=Ve().user,i=Qn({initialValues:{token:"",password:""}}),s=i.errors,u=i.handleSubmit,d=i.register;return a||t===r.CODE?Object(Ye.jsx)($e.a,{to:{pathname:"/"}}):Object(Ye.jsx)(Ke,{isLoading:c,children:Object(Ye.jsxs)(Pn,{children:[Object(Ye.jsx)(zt,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(Ye.jsx)(fn,{children:Object(Ye.jsx)(On,{mod:"auto",align:"center",children:Object(Ye.jsx)(Bn,{onSubmit:u((function(e){var t=e.password,r=e.token;return n(t,r)})),header:Object(Ye.jsx)("h5",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),body:Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)("div",{className:"mb-6",children:Object(Ye.jsx)(Gn,Object(O.a)({placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",error:!!s.password,errorText:s.password},d("password")))}),Object(Ye.jsx)("div",{className:"mb-6",children:Object(Ye.jsx)(o.Input,Object(O.a)({placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",error:!!s.token,errorText:s.token},d("token")))}),Object(Ye.jsx)(o.Button,{size:"large",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),footer:Object(Ye.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0",Object(Ye.jsx)(l.b,{className:"link",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})})})})]})})},cr=function(){var e=Qn({initialValues:{email:""}}),t=e.register,n=e.errors,c=e.handleSubmit,a=nr(),i=a.getCode,s=a.step,u=a.isLoading;return Ve().user?Object(Ye.jsx)($e.a,{to:{pathname:"/"}}):s===r.RESET?Object(Ye.jsx)($e.a,{to:{pathname:"/reset-password"}}):Object(Ye.jsx)(Ke,{isLoading:u,children:Object(Ye.jsxs)(Pn,{children:[Object(Ye.jsx)(zt,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(Ye.jsx)(Bn,{onSubmit:c((function(e){var t=e.email;return i(t)})),header:Object(Ye.jsx)("h5",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),body:Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)("div",{className:"mb-6",children:Object(Ye.jsx)(o.Input,Object(O.a)(Object(O.a)({placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail"},t("email",{required:!0,email:!0})),{},{error:!!n.email,errorText:n.email}))}),Object(Ye.jsx)(o.Button,{size:"large",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),footer:Object(Ye.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0",Object(Ye.jsx)(l.b,{className:"link",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})},ar=["type","placeholder","onBlur","onDelete","value","onChange","error","errorText"],ir=function(e){var t=e.type,n=void 0===t?"text":t,r=e.placeholder,a=e.onBlur,i=e.onDelete,s=e.value,l=e.onChange,u=e.error,d=e.errorText,j=Object(x.a)(e,ar),b=Object(c.useRef)(null),m=Object(c.useState)(!1),p=Object(ct.a)(m,2),h=p[0],f=p[1];return Object(c.useEffect)((function(){h&&b.current&&b.current.focus()}),[h]),Object(Ye.jsx)(o.Input,Object(O.a)({ref:b,onBlur:function(e){f(!1),a&&a(e)},placeholder:r,type:n,disabled:!h,icon:h?"CloseIcon":"EditIcon",onIconClick:function(){h&&i?i():f(!h)},onChange:l,value:s,error:u,errorText:d},j))},sr=n(136),or=n.n(sr),lr=n(137),ur=n.n(lr),dr=function(e){var t=e.description,n=e.content,r=it()("mt-20 text text_type_main-default text_color_inactive",ur.a.description);return Object(Ye.jsx)(Pn,{children:Object(Ye.jsxs)(fn,{children:[Object(Ye.jsxs)(On,{mod:"4",children:[Object(Ye.jsxs)(kn,{direction:"column",size:"big",className:"mt-30",children:[Object(Ye.jsx)(Cn,{to:"/profile",label:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(Ye.jsx)(Cn,{to:"/profile/orders",label:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(Ye.jsx)(Cn,{to:"/logout",label:"\u0412\u044b\u0445\u043e\u0434"})]}),Object(Ye.jsx)("p",{className:r,children:t})]}),Object(Ye.jsx)(On,{children:n})]})})},jr=function(){var e=Ve(),t=e.user,n=e.update,r={name:t.name,email:t.email,password:""},c=Qn({initialValues:r}),a=c.register,i=c.errors,s=c.handleSubmit,l=c.setFields,u=c.fields,d=c.isDirty,j=function(e){return function(){return l(Object(O.a)(Object(O.a)({},u),{},Object(gt.a)({},e,"")))}};return Object(Ye.jsx)(dr,{description:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",content:Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)(zt,{title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(Ye.jsxs)(fn,{children:[Object(Ye.jsx)(On,{children:Object(Ye.jsx)(Bn,{onSubmit:s((function(e){return n(e)})),body:Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)("div",{className:"mb-6",children:Object(Ye.jsx)(ir,Object(O.a)(Object(O.a)({placeholder:"\u0418\u043c\u044f"},a("name",{required:!0})),{},{onDelete:j("name"),error:!!i.name,errorText:i.name}))}),Object(Ye.jsx)("div",{className:"mb-6",children:Object(Ye.jsx)(ir,Object(O.a)(Object(O.a)({placeholder:"\u041b\u043e\u0433\u0438\u043d"},a("email",{required:!0,email:!0})),{},{onDelete:j("email"),error:!!i.email,errorText:i.email}))}),Object(Ye.jsx)("div",{className:"mb-6",children:Object(Ye.jsx)(ir,Object(O.a)({type:"password",onDelete:j("password"),placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"},a("password")))}),d&&Object(Ye.jsxs)("div",{className:or.a.buttons,children:[Object(Ye.jsx)(o.Button,{type:"secondary",size:"large",htmlType:"button",onClick:function(){return l(r)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(Ye.jsx)(o.Button,{size:"large",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})}),Object(Ye.jsx)(On,{})]})]})})},br=function(){var e=ve(),t=ge((function(e){return e.history}));return Object(O.a)(Object(O.a)({},t),{},{init:function(){return e({type:"HISTORY_WS_INIT"})},close:function(){return e({type:"HISTORY_WS_CLOSE"})}})},mr=n(30),pr=n.n(mr),Or=n(68),xr=n.n(Or),hr=function(e){var t=e.name,n=e.image,r=e.style,c=e.className,a=e.children,i=it()(xr.a["image-gradient"],c);return Object(Ye.jsx)("div",{className:i,style:r,children:Object(Ye.jsxs)("div",{className:xr.a["image-wrapper"],children:[Object(Ye.jsx)("img",{src:n,className:xr.a.image,alt:t}),a]})})},fr=function(e){var t=e.status,n=e.className,r=it()("text text_type_main-default",n);return Object(Ye.jsx)("div",{className:r,children:"done"===t?Object(Ye.jsx)("span",{className:"text_color_success",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}):"pending"===t?Object(Ye.jsx)("span",{className:"text_color_success",children:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}):Object(Ye.jsx)("span",{className:"text_color_success",children:"\u0421\u043e\u0437\u0434\u0430\u043d"})})},_r=n(65),vr=n.n(_r);n(229);vr.a.locale("ru");var gr=vr.a,yr=function(e){return gr(e).calendar(null,{sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f], HH:mm",nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430], HH:mm",nextWeek:"[\u041d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u043d\u0435\u0434\u0435\u043b\u0435], dddd HH:mm",lastDay:"[\u0412\u0447\u0435\u0440\u0430], HH:mm",lastWeek:"[\u041d\u0430 \u043f\u0440\u043e\u0448\u043b\u043e\u0439 \u043d\u0435\u0434\u0435\u043b\u0435], dddd HH:mm",sameElse:"DD.MM.YYYY, HH:mm"})},Nr=function(e){var t=e.order,n=e.onClick,r=e.showStatus,a=void 0!==r&&r,i=It(),s=i.items,o=i.collect,l=i.calculateAmount,u=it()(pr.a.card,"p-6 mb-4"),d=it()(pr.a.date,"text text_type_main-default text_color_inactive"),j=it()(pr.a.more,"text text_type_digits-default"),b=Object(c.useMemo)((function(){var e=o(t.ingredients),n=l(e),r=e.slice(0,6);return{images:r.map((function(t,n){var c="".concat(48*n,"px"),a=6-n,i=n===r.length-1,s=e.length-r.length,o={position:"absolute",left:c,zIndex:a};return t&&Object(Ye.jsx)(hr,{style:o,name:t.name,image:t.image,children:i&&s>0&&Object(Ye.jsxs)("div",{className:j,children:["+",s]})},n)})),totalAmount:n}}),[s,l,o,j,t.ingredients]),m=b.images,p=b.totalAmount,O=Object(c.useMemo)((function(){return yr(t.createdAt)}),[t.createdAt]);return Object(Ye.jsxs)("div",{className:u,onClick:n,children:[Object(Ye.jsxs)("div",{className:pr.a.header,children:[Object(Ye.jsxs)("div",{className:"text text_type_digits-default",children:["#",t.number]}),Object(Ye.jsx)("div",{className:d,children:O})]}),Object(Ye.jsxs)("div",{className:pr.a.body,children:[Object(Ye.jsxs)("div",{className:"mb-6",children:[Object(Ye.jsx)("h5",{className:"text text_type_main-medium mt-6",children:t.name}),a&&Object(Ye.jsx)(fr,{status:t.status,className:"mt-2"})]}),Object(Ye.jsxs)("div",{className:pr.a.meta,children:[Object(Ye.jsx)("div",{className:pr.a["images-stack"],children:m}),Object(Ye.jsx)(dn,{amount:p.toString()})]})]})]})},wr=function(){var e=br(),t=e.orders,n=e.init,r=e.close,a=Object($e.j)().path,i=Object($e.g)(),s=Object($e.h)();Object(c.useEffect)((function(){return n(),function(){r()}}),[]);return Object(Ye.jsx)(dr,{description:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432",content:Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)(zt,{title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(Ye.jsx)(_t,{className:"mt-10",grow:!0,children:t.map((function(e){return Object(Ye.jsx)(Nr,{order:e,showStatus:!0,onClick:(t=e.number,function(){i.push({pathname:"".concat(a,"/").concat(t),state:{background:s}})})},e._id);var t}))})]})})},Er=n(138),kr=n.n(Er),Sr=function(){return Object(Ye.jsx)(gn,{children:Object(Ye.jsx)(fn,{className:kr.a.row,children:Object(Ye.jsxs)(On,{mod:"6",className:"ml-auto mr-auto",children:[Object(Ye.jsx)("h5",{className:"text text_type_main-large mb-5",children:"\u0423\u043f\u0441! 404 \u041e\u0448\u0438\u0431\u043a\u0430"}),Object(Ye.jsxs)("p",{className:"text text_type_main-default",children:["\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0432\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u0438\u043b\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0438\u043b\u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435\xa0",Object(Ye.jsx)(l.b,{to:"/",className:"link",children:"\u0413\u043b\u0430\u0432\u043d\u0443\u044e"})]})]})})})},Tr=function(e){return{type:ce,payload:e}},Cr=function(){var e=ve(),t=ge((function(e){return e.orderInfo}));return Object(O.a)(Object(O.a)({},t),{},{clear:function(){return e({type:ie})},get:function(t){return e(function(e){return function(){var t=Object(Ee.a)(we.a.mark((function t(n){var r;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:re}),t.prev=1,t.next=4,We.order.get(e);case 4:r=t.sent,n(Tr(r)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),n(m(t.t0)),n({type:ae});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))}})},Rr=n(139),Ir=n.n(Rr),Lr=function(e){var t=e.ingredient,n=it()(Ir.a.row,"mb-4"),r="".concat(t.count," x ").concat(t.price);return Object(Ye.jsxs)("div",{className:n,children:[Object(Ye.jsx)(hr,{className:"mr-4",name:t.name,image:t.image_mobile}),Object(Ye.jsx)("h5",{className:"text text_type_main-default",children:t.name}),Object(Ye.jsx)(dn,{amount:r,className:"ml-auto"})]})},Dr=n(98),Mr=n.n(Dr),Fr=function(e){var t=e.order,n=e.withinModal,r=void 0!==n&&n,a=It(),i=a.items,s=a.collect,o=a.calculateAmount,l=Object(c.useMemo)((function(){return s(t.ingredients)}),[t.ingredients,i,s]),u=Object(c.useMemo)((function(){return yr(t.createdAt)}),[t.createdAt]),d=Object(c.useMemo)((function(){return o(l)}),[l,o]),j=it()("text text_type_digits-default",{tac:!r}),b=it()(Mr.a.meta,"mt-10 mb-10");return Object(Ye.jsxs)("div",{children:[Object(Ye.jsx)(zt,{title:t.name}),Object(Ye.jsxs)("div",{className:j,children:["#",t.number]}),Object(Ye.jsx)("h4",{className:"text text text_type_main-medium mt-10 mb-3",children:t.name}),Object(Ye.jsx)(fr,{status:t.status,className:"mb-15"}),Object(Ye.jsx)("h4",{className:"text text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(Ye.jsx)(_t,{className:Mr.a.scroll,children:l.map((function(e){return e&&Object(Ye.jsx)(Lr,{ingredient:e},e._id)}))}),Object(Ye.jsxs)("div",{className:b,children:[Object(Ye.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:u}),Object(Ye.jsx)(dn,{amount:d.toString()})]})]})},Ar=function(){var e=Cr(),t=e.get,n=e.order,r=e.isPending,a=e.clear,i=Object($e.i)().id;return Object(c.useEffect)((function(){return t(+i),function(){a()}}),[]),!r&&!n?Object(Ye.jsx)(Sr,{}):n?Object(Ye.jsx)(Pn,{children:Object(Ye.jsx)(fn,{children:Object(Ye.jsx)(On,{mod:"6",align:"center",className:"pt-20",children:Object(Ye.jsx)(Fr,{order:n})})})}):null},zr=function(){var e=Object($e.j)().path;return Object(Ye.jsx)(Ye.Fragment,{children:Object(Ye.jsxs)($e.d,{children:[Object(Ye.jsx)($e.b,{path:e,exact:!0,children:Object(Ye.jsx)(jr,{})}),Object(Ye.jsx)($e.b,{path:"".concat(e,"/orders"),exact:!0,children:Object(Ye.jsx)(wr,{})}),Object(Ye.jsx)($e.b,{path:"".concat(e,"/orders/:id"),exact:!0,children:Object(Ye.jsx)(Ar,{})})]})})},Pr=function(){var e=Ve().logout,t=Object($e.g)();return Object(c.useEffect)((function(){e((function(){return t.replace({pathname:"/login"})}))}),[]),null},Hr=function(){var e=ve(),t=ge((function(e){return e.feed}));return Object(O.a)(Object(O.a)({},t),{},{init:function(){return e({type:"FEED_WS_INIT"})},close:function(){return e({type:"FEED_WS_CLOSE"})}})},Ur=n(50),Wr=n.n(Ur),Br=function(e){var t=e.items,n=void 0===t?[]:t,r=e.label,a=e.perColumn,i=void 0===a?5:a,s=e.done,o=void 0!==s&&s,l=it()("text text_type_digits-default mb-2",Object(gt.a)({},Wr.a.done,o)),u=Object(c.useMemo)((function(){return n.reduce((function(e,t,n){var r=Math.floor(n/i);return e[r]=e[r]||[],e[r].push(t),e}),[])}),[n]);return Object(Ye.jsxs)("div",{className:it()(Wr.a.wrapper,"custom-scroll"),children:[Object(Ye.jsx)("h5",{className:"text text_type_main-medium mb-6",children:r}),Object(Ye.jsx)("div",{className:Wr.a.columns,children:u.map((function(e,t){return Object(Ye.jsx)("div",{className:Wr.a.column,children:e.map((function(e,t){return Object(Ye.jsx)("div",{className:l,children:e},t)}))},t)}))})]})},qr=function(){var e=Hr(),t=e.init,n=e.close,r=e.orders,a=e.total,i=e.totalToday,s=Object($e.g)(),o=Object($e.h)();Object(c.useEffect)((function(){return t(),function(){n()}}),[]);var l=Object(c.useMemo)((function(){return r.filter((function(e){return"done"===e.status})).map((function(e){return e.number}))}),[r]),u=Object(c.useMemo)((function(){return r.filter((function(e){return"done"!==e.status})).map((function(e){return e.number}))}),[r]);return Object(Ye.jsxs)(Pn,{children:[Object(Ye.jsx)(zt,{title:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(Ye.jsx)("h5",{className:"text text_type_main-large mb-6 mt-10",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(Ye.jsxs)(fn,{children:[Object(Ye.jsx)(On,{mod:"6",children:Object(Ye.jsx)(_t,{grow:!0,threshold:20,children:r.map((function(e){return Object(Ye.jsx)(Nr,{order:e,onClick:(t=e.number,function(){s.push({pathname:"/feed/".concat(t),state:{background:o}})})},e._id);var t}))})}),Object(Ye.jsxs)(On,{mod:"6",className:"pl-10",children:[Object(Ye.jsxs)(fn,{className:"mb-15",children:[Object(Ye.jsx)(On,{mod:"6",children:Object(Ye.jsx)(Br,{label:"\u0413\u043e\u0442\u043e\u0432\u044b:",items:l,done:!0})}),Object(Ye.jsx)(On,{mod:"6",children:Object(Ye.jsx)(Br,{label:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:",items:u})})]}),Object(Ye.jsx)("h5",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(Ye.jsx)("div",{className:"text text_glowing text_type_digits-large mb-15",children:a}),Object(Ye.jsx)("h5",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(Ye.jsx)("div",{className:"text text_glowing text_type_digits-large",children:i})]})]})]})},Gr=n(19),Vr=n.n(Gr),Yr=function(e){var t=e.ingredient,n=e.withinModal,r=void 0!==n&&n,c=t.name,a=t.calories,i=t.proteins,s=t.fat,o=t.carbohydrates,l=t.image_large,u=it()(Vr.a.title,"text text_type_main-large pr-7",{"mr-auto":r});return Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)(zt,{title:c}),Object(Ye.jsx)("h5",{className:u,children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(Ye.jsx)("img",{src:l,alt:c}),Object(Ye.jsx)("h5",{className:it()(Vr.a.name,"mt-4 mb-8 text text_type_main-medium"),children:c}),Object(Ye.jsxs)("div",{className:Vr.a.properties,children:[Object(Ye.jsxs)("div",{className:it()(Vr.a.property,"pr-5"),children:[Object(Ye.jsx)("span",{className:it()(Vr.a["property-label"],"text text_type_main-small text_color_inactive"),children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0439,\u043a\u043a\u0430\u043b"}),Object(Ye.jsx)("span",{className:it()(Vr.a["property-value"],"text text_type_digits-default text_color_inactive"),children:a})]}),Object(Ye.jsxs)("div",{className:it()(Vr.a.property,"pr-5"),children:[Object(Ye.jsx)("span",{className:it()(Vr.a["property-label"],"text text_type_main-small text_color_inactive"),children:"\u0411\u0435\u043b\u043a\u0438,\u0433"}),Object(Ye.jsx)("span",{className:it()(Vr.a["property-value"],"text text_type_digits-default text_color_inactive"),children:i})]}),Object(Ye.jsxs)("div",{className:it()(Vr.a.property,"pr-5"),children:[Object(Ye.jsx)("span",{className:it()(Vr.a["property-label"],"text text_type_main-small text_color_inactive"),children:"\u0416\u0438\u0440\u044b,\u0433"}),Object(Ye.jsx)("span",{className:it()(Vr.a["property-value"],"text text_type_digits-default text_color_inactive"),children:s})]}),Object(Ye.jsxs)("div",{className:"".concat(Vr.a.property),children:[Object(Ye.jsx)("span",{className:it()(Vr.a["property-label"],"text text_type_main-small text_color_inactive"),children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b,\u0433"}),Object(Ye.jsx)("span",{className:it()(Vr.a["property-value"],"text text_type_digits-default text_color_inactive"),children:o})]})]})]})},Xr=function(){return Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)(wt,{width:"240px",height:"240px",className:"mt-4",variant:"rounded"}),Object(Ye.jsx)(wt,{width:"240px",height:"30px",className:"mt-8 mb-4"}),Object(Ye.jsxs)("div",{className:"d-flex space-between",style:{width:"240px"},children:[Object(Ye.jsx)(wt,{width:"20%",height:"30px"}),Object(Ye.jsx)(wt,{width:"20%",height:"30px"}),Object(Ye.jsx)(wt,{width:"20%",height:"30px"}),Object(Ye.jsx)(wt,{width:"20%",height:"30px"})]})]})},Jr=function(){var e=It(),t=e.items,n=e.isLoading,r=Object($e.i)().id,a=Object(c.useRef)(!0);Object(c.useEffect)((function(){a.current&&(a.current=!1)}));var i=Object(c.useMemo)((function(){return t.find((function(e){return e._id===r}))}),[r,t]);return!n&&!i&&!a.current?Object(Ye.jsx)(Sr,{}):Object(Ye.jsx)(Pn,{children:Object(Ye.jsx)(fn,{children:Object(Ye.jsx)(On,{mod:"6",align:"center",className:"d-flex flex-column align-items-center pt-30",children:i?Object(Ye.jsx)(Yr,{ingredient:i}):Object(Ye.jsx)(Xr,{})})})})},Qr=function(e){e.redirectTo;var t=Cr(),n=t.get,r=t.order,a=t.isPending,i=t.clear,s=Object($e.i)().id,o=Object($e.g)();if(Object(c.useEffect)((function(){return n(+s),function(){i()}}),[]),!a&&!r)return Object(Ye.jsx)(Sr,{});return r?Object(Ye.jsx)(Jt,{className:"p-10",onRequestClose:function(){return o.goBack()},children:Object(Ye.jsx)(Fr,{order:r,withinModal:!0})}):null},Zr=function(){var e=Object($e.i)().id,t=Object($e.g)(),n=It().items,r=Object(c.useMemo)((function(){return n.find((function(t){return t._id===e}))}),[e,n]);return r?Object(Ye.jsx)(Jt,{className:"pt-10 pr-10 pb-15 pl-10",onRequestClose:function(){return t.goBack()},children:Object(Ye.jsx)(Yr,{ingredient:r,withinModal:!0})}):null},Kr=function(){var e=Object($e.h)(),t=e.state&&e.state.background;return Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsxs)($e.d,{location:t||e,children:[Object(Ye.jsx)($e.b,{path:"/",exact:!0,children:Object(Ye.jsx)(Hn,{})}),Object(Ye.jsx)($e.b,{path:"/ingredients/:id",exact:!0,children:Object(Ye.jsx)(Jr,{})}),Object(Ye.jsx)($e.b,{path:"/login",exact:!0,children:Object(Ye.jsx)(Kn,{})}),Object(Ye.jsx)($e.b,{path:"/register",exact:!0,children:Object(Ye.jsx)(Zn,{})}),Object(Ye.jsx)($e.b,{path:"/reset-password",exact:!0,children:Object(Ye.jsx)(rr,{})}),Object(Ye.jsx)($e.b,{path:"/forgot-password",exact:!0,children:Object(Ye.jsx)(cr,{})}),Object(Ye.jsx)(tt,{path:"/profile",children:Object(Ye.jsx)(zr,{})}),Object(Ye.jsx)(tt,{path:"/logout",exact:!0,children:Object(Ye.jsx)(Pr,{})}),Object(Ye.jsx)($e.b,{path:"/feed",exact:!0,children:Object(Ye.jsx)(qr,{})}),Object(Ye.jsx)($e.b,{path:"/feed/:id",exact:!0,children:Object(Ye.jsx)(Ar,{})}),Object(Ye.jsx)($e.b,{path:"*",children:Object(Ye.jsx)(Sr,{})})]}),t&&Object(Ye.jsx)($e.b,{path:"/ingredients/:id",exact:!0,children:Object(Ye.jsx)(Zr,{})}),t&&Object(Ye.jsx)($e.b,{path:"/feed/:id",exact:!0,children:Object(Ye.jsx)(Qr,{redirectTo:"/feed"})}),t&&Object(Ye.jsx)(tt,{path:"/profile/orders/:id",exact:!0,children:Object(Ye.jsx)(Qr,{redirectTo:"/profile/orders"})})]})},$r=function(){var e=Ve(),t=e.isLoading,n=e.getUser,r=It().getItems;return Object(c.useEffect)((function(){n(),r()}),[]),Object(Ye.jsxs)(At.b,{children:[Object(Ye.jsx)(zt,{}),Object(Ye.jsx)(Ke,{isLoading:t,children:Object(Ye.jsx)(l.a,{children:Object(Ye.jsx)(Kr,{})})})]})},ec=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,238)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};s.a.render(Object(Ye.jsx)(a.a.StrictMode,{children:Object(Ye.jsx)(d.a,{store:ye,children:Object(Ye.jsx)($r,{})})}),document.getElementById("root")),ec()},30:function(e,t,n){e.exports={card:"order-card_card__23EZk",header:"order-card_header__2rGvy","image-gradient":"order-card_image-gradient__SkzH2",more:"order-card_more__7I2TN","image-wrapper":"order-card_image-wrapper__FbEVb",image:"order-card_image__1sDDk","images-stack":"order-card_images-stack__2mOJD",meta:"order-card_meta__3RyEp"}},33:function(e,t,n){e.exports={item:"bun-dropzone_item__3LI-M",placeholder:"bun-dropzone_placeholder__gK0lK",overlay:"bun-dropzone_overlay__3QVdm",top:"bun-dropzone_top__2ZaHH",bottom:"bun-dropzone_bottom__20vn9","overlay-title":"bun-dropzone_overlay-title__2xzRc"}},38:function(e,t,n){e.exports={item:"ingredients-dropzone_item__haNAE",handle:"ingredients-dropzone_handle__2rQ_l",scroll:"ingredients-dropzone_scroll__1jGX_",wrapper:"ingredients-dropzone_wrapper__24a21",placeholder:"ingredients-dropzone_placeholder__YI5Po",overlay:"ingredients-dropzone_overlay__26CHS","overlay-title":"ingredients-dropzone_overlay-title__1MDjq"}},46:function(e,t,n){e.exports={card:"ingredient-card_card__3NLvn",image:"ingredient-card_image__5l3_h",title:"ingredient-card_title__262G8",price:"ingredient-card_price__6A_o-"}},47:function(e,t,n){e.exports={skeleton:"skeleton_skeleton__8dWwW","skeleton-animation":"skeleton_skeleton-animation__1p7G7",rounded:"skeleton_rounded__151dn",text:"skeleton_text__3X27c",rectangular:"skeleton_rectangular__ca8K7"}},48:function(e,t,n){e.exports={card:"order-details_card__2XO-c","close-btn":"order-details_close-btn__3iChb",description:"order-details_description__2MA-T"}},49:function(e,t,n){e.exports={form:"register-form_form__2TdHn",body:"register-form_body__1Yr62",footer:"register-form_footer__27HLi",header:"register-form_header__1D75L"}},50:function(e,t,n){e.exports={wrapper:"dynamic-col_wrapper__3QQAR",columns:"dynamic-col_columns__apf-z",column:"dynamic-col_column__MVTBk",done:"dynamic-col_done___oVyA"}},67:function(e,t,n){e.exports={"menu-item":"menu-item_menu-item__16fxq",icon:"menu-item_icon__2Mp59",active:"menu-item_active__3Od3O",vertical:"menu-item_vertical__2E6qj"}},68:function(e,t,n){e.exports={"image-gradient":"ingredient-preview_image-gradient__3aQqP",more:"ingredient-preview_more__3HRf5","image-wrapper":"ingredient-preview_image-wrapper__XuHiB",image:"ingredient-preview_image__15aUD"}},86:function(e,t,n){e.exports={"tabs-container":"burger-ingredients_tabs-container__2P5rq",grid:"burger-ingredients_grid__sk81X",item:"burger-ingredients_item__34OXk"}},87:function(e,t,n){e.exports={"tabs-list":"tabs_tabs-list__1P5Tm","tab-item":"tabs_tab-item__2Yr-Y"}},89:function(e,t,n){e.exports={grid:"ingredients-skeleton_grid__3h5sX",card:"ingredients-skeleton_card__3PbiX"}},91:function(e,t,n){e.exports={modal:"modal_modal__1Nr3T",content:"modal_content__omGp3"}},92:function(e,t,n){e.exports={item:"sortable-ingredient_item__1C0tO",handle:"sortable-ingredient_handle__2_uCU"}},93:function(e,t,n){e.exports={"col-base":"col_col-base__2aVAU",col:"col_col__fMdbw col_col-base__2aVAU","col-3":"col_col-3__27Ph0 col_col-base__2aVAU","col-4":"col_col-4__28J_O col_col-base__2aVAU","col-6":"col_col-6__3Qoj8 col_col-base__2aVAU","col-auto":"col_col-auto__81ECA col_col-base__2aVAU",left:"col_left__3yb1m",right:"col_right__2USG9",center:"col_center__3jfJG"}},94:function(e,t,n){e.exports={menu:"menu_menu__o5ZuH",row:"menu_row__ajgxN",column:"menu_column__MvsQz"}},95:function(e,t,n){e.exports={notice:"notice_notice__1UXKt",close:"notice_close__3Iw7m"}},96:function(e,t,n){e.exports={header:"app-header_header__20VQX",container:"app-header_container__3TbTN"}},98:function(e,t,n){e.exports={scroll:"order-info_scroll__1w9io",meta:"order-info_meta__3q9rZ"}}},[[230,1,2]]]);
//# sourceMappingURL=main.2150836c.chunk.js.map